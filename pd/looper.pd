#N canvas 0 25 1680 997 12;
#X declare -path bin;
#X declare -path bin64;
#X msg 4096 631 \; pd dsp 1;
#X msg 4095 671 \; pd dsp 0;
#X obj 220 1604 hsl 128 15 0 1 0 1 empty empty output-level 20 8 0 10 #fcfcfc #fc8000 #000000 9500 0;
#X floatatom 224 1637 5 0 0 0 - - - 0;
#X obj 4096 602 loadbang;
#X obj 182 886 hsl 300 20 -4 4 0 1 empty empty writing-and-reading-speed 100 10 0 10 #fcfcfc #fc8000 #000000 18700 0;
#X obj 701 1399 hip~ 5;
#X floatatom 250 917 4 0 0 0 - - - 0;
#X obj 589 228 hsl 395 64 0 440832 0 0 empty \$0-slider empty -2 -8 0 10 #fcfcfc #fc8000 #000000 0 1;
#X msg 4340 652 const 0;
#X text 250 1535 direct out;
#X obj 742 1376 hsl 64 15 0 1 0 1 empty empty feedback 5 8 0 10 #fcfcfc #fc8000 #000000 4365 0;
#N canvas 1 51 420 192 searchpatch 0;
#X obj 36 95 declare -path bin;
#X obj 36 129 declare -path bin64;
#X text 34 31 Find path to [ipoke~] executables. If you want to use [ipoke~] in your own patches \, copy or move the executable for your platform in Pd's 'extra' directory.;
#X restore 2203 75 pd searchpatch;
#N canvas 0 22 180 176 dac~ 0;
#X obj 18 34 inlet~;
#X obj 18 102 dac~;
#X obj 18 70 *~ 0;
#X obj 78 34 inlet;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X connect 2 0 1 1;
#X connect 3 0 2 1;
#X restore 168 1637 pd dac~;
#X obj 320 1232 tgl 25 1 empty empty empty 17 7 0 10 #fcfcfc #fc8000 #000000 1 1;
#X text 270 1265 draw;
#X obj 219 1533 tgl 25 1 empty empty empty 17 7 0 10 #fcfcfc #fc8000 #000000 0 0.7;
#X text 985 791 Variable speed sound on sound looping delay \, tested with soundfile (.wav or .aiff). It works particularly nice with drumloops.;
#N canvas 295 320 450 300 (subpatch) 0;
#X array \$0-ipokebuf 440832 float 2;
#X coords 0 1 440832 -1 400 64 1 0 0;
#X restore 587 228 graph;
#X text 986 845 Be careful with high feedback settings if the soundfile is still playing \, there is no limiter included in this patch.;
#X text 4394 652 clear buffer;
#X obj 186 1567 *~ 0.7;
#X obj 701 1431 *~ 0.7;
#X text 986 886 If you experience nasty clicks or dropouts \, it may be caused by the array's visual update. Disable the 'draw' toggle.;
#X obj 140 285 hsl 128 15 0 2 0 1 empty empty input-gain 20 8 0 10 #fcfcfc #fc8000 #000000 4600 1;
#N canvas 572 171 217 211 adc 0;
#X obj 60 13 inlet;
#X obj 39 48 *~ 1;
#X obj 39 129 s~ \$0-input;
#X obj 18 13 adc~;
#X obj 123 130 outlet;
#X obj 123 100 env~ 2048;
#X connect 0 0 1 1;
#X connect 1 0 2 0;
#X connect 1 0 5 0;
#X connect 3 0 1 0;
#X connect 3 1 1 0;
#X connect 5 0 4 0;
#X restore 137 333 pd adc;
#X floatatom 148 310 5 0 0 0 - - - 0;
#X obj 681 1456 r~ \$0-input;
#X obj 681 1488 +~;
#X obj 873 1353 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 873 1414 t i i;
#X obj 935 1438 sel 1;
#X obj 938 1498 line~;
#X obj 680 1521 *~;
#X obj 186 1502 r~ \$0-input;
#X text 900 1354 record;
#X obj 837 1493 *~;
#X obj 855 1521 +~;
#X obj 873 1440 != 1;
#X obj 873 1466 sig~ -1;
#X obj 873 1492 *~;
#X msg 937 1466 0 \, 1 10 \;;
#X msg 1011 1465 0 10 \;;
#X obj 138 389 vu 19 200 empty empty -1 -10 0 12 #404040 #000000 1 0;
#X obj 137 360 - 90;
#X obj 1865 764 soundfiler;
#X text 140 44 todo: can we make sure that we init to a 44.1k sample rate?;
#X obj 1932 807 t b;
#X obj 2556 910 loadbang;
#X obj 1611 103 route process-result error;
#X obj 1871 623 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 1612 424 soundfiler;
#X obj 2623 911 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 1791 158 print other-msg;
#X obj 2547 1024 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X msg 2620 965 disconnect;
#X msg 2556 936 connect localhost 8001;
#X obj 1932 860 symbol;
#X msg 1931 835 buf.wav;
#X obj 1931 887 oscformat /process;
#X obj 1931 915 list prepend send;
#X obj 1931 939 list trim;
#X obj 2547 994 netsend -u -b;
#X obj 1612 50 oscparse;
#X obj 1612 8 netreceive -u -b 8002;
#X obj 1800 134 print process-result;
#X obj 1709 421 print readmsg;
#X obj 1611 76 list trim;
#X obj 1612 148 symbol;
#X obj 1685 451 print read;
#X obj 2530 515 list prepend send;
#X obj 2530 539 list trim;
#X obj 2470 436 oscformat /seed;
#X obj 591 143 hsl 395 64 0 440832 0 0 empty \$0-slider empty -2 -8 0 10 #fcfcfc #fc8000 #000000 0 1;
#N canvas 295 320 450 300 (subpatch) 0;
#X array \$0-wetpokebuf 440832 float 2;
#X coords 0 1 440832 -1 400 64 1 0 0;
#X restore 587 143 graph;
#X obj 699 836 loadbang;
#X text 122 731 audio processing;
#X text 522 255 dry buf;
#X text 1753 624 gloop button;
#X text 2000 840 /process;
#X text 2301 503 OSC controls (4 backend);
#X text 1795 7 osc receive;
#X floatatom 2198 289 5 0 0 0 - - - 0;
#X obj 170 1455 expr~ ($v1*(1-$v3*$v3)) + ($v2*($v3*$v3));
#X obj 454 1409 hsl 128 15 0 1 0 1 empty empty xfade 20 8 0 10 #fcfcfc #fc8000 #000000 12700 0;
#X obj 178 1219 phasor~;
#X obj 178 1245 *~ 88200;
#N canvas 329 481 282 268 draw 0;
#X obj 29 168 snapshot~;
#X obj 29 225 s \$0-draw;
#X obj 29 196 bang;
#X obj 183 103 metro 500;
#X obj 29 10 inlet~;
#X obj 183 -2 inlet;
#X obj 80 80 snapshot~;
#X obj 80 106 s \$0-slider;
#X obj 80 51 metro 50;
#X obj 80 26 tgl 15 1 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 1 1;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X connect 3 0 0 0;
#X connect 4 0 0 0;
#X connect 4 0 6 0;
#X connect 5 0 3 0;
#X connect 6 0 7 0;
#X connect 8 0 6 0;
#X connect 9 0 8 0;
#X restore 275 1289 pd draw;
#X floatatom 637 1035 10 44032 440832 0 - - - 0;
#X obj 3335 1571 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 3336 1601 sel 1 0;
#X msg 226 1190 0;
#X text 3662 1680 momentary record circuit - on 0->1 \, reset to max size \, clear buffer \, move playhead to 0 \, record enable and play - on 1->0 \, cut buffer to current len \, record disable, f 27;
#X text 762 902 maxbuffer size;
#X text 723 1042 buffer size;
#X obj 785 870 print maxbufsize;
#X obj 666 1196 s \$0-slider;
#X obj 180 1119 *;
#X obj 192 1143 s \$0-Hz;
#X msg 666 1166 range 0 \$1;
#X floatatom 638 973 10 44032 440832 0 - - - 0;
#X text 719 970 requested bufsize;
#X obj 673 837 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X msg 700 876 441000;
#X obj 179 838 loadbang;
#X floatatom 331 848 4 0 0 0 - - - 0;
#X obj 331 821 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X msg 250 943 set \$1;
#X obj 88 885 t 0 b;
#X obj 3125 1633 t b b b b b b b;
#X msg 3142 1766 1;
#X obj 387 1279 snapshot~;
#X obj 387 1252 r \$0-sample-pos-bang;
#X obj 387 1303 s \$0-sample-pos;
#X obj 873 1316 r \$0-rec-toggle;
#X obj 227 1166 r \$0-reset-phasor;
#X obj 89 770 r \$0-pause;
#X obj 331 796 r \$0-play;
#X obj 3165 1743 s \$0-pause;
#X obj 3178 1718 s \$0-reset-phasor;
#X obj 3192 1694 s \$0-clearbuffer;
#X obj 3207 1669 s \$0-maxbufsize;
#X obj 785 837 r \$0-maxbufsize;
#X obj 3126 1818 s \$0-play;
#X obj 3496 1676 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 3496 1700 s \$0-sample-pos-bang;
#X obj 3496 1724 r \$0-sample-pos;
#X obj 3493 1750 s \$0-request-bufsize;
#X obj 640 941 r \$0-request-bufsize;
#X msg 3381 1676 0;
#X obj 700 900 int;
#X floatatom 179 941 5 0 0 0 - - - 0;
#X obj 3359 1635 t b b b;
#X obj 3352 1731 s \$0-reset-phasor;
#X obj 680 1550 ipoke~ \$0-ipokebuf;
#X obj 171 1374 tabread4~ \$0-ipokebuf, f 15;
#X obj 309 1374 tabread4~ \$0-wetpokebuf, f 20;
#X obj 4340 681 s \$0-ipokebuf;
#X obj 4449 680 s \$0-wetpokebuf;
#X obj 3142 1793 s \$0-rec-toggle;
#X obj 3381 1700 s \$0-rec-toggle;
#X obj 4340 589 r \$0-clearbuffer;
#X obj 722 1521 r \$0-draw;
#X obj 666 1075 array size \$0-ipokebuf;
#X obj 666 1102 array size \$0-wetpokebuf;
#X obj 4636 580 loadbang;
#X obj 4637 606 \$0;
#X obj 4637 654 r \$0-id;
#X obj 4612 579 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 4637 630 s \$0-id;
#X msg 1865 740 write buf.wav \$1;
#X obj 1665 294 r \$0-id;
#X obj 1665 343 symbol;
#X msg 1665 319 \$1-wetpokebuf;
#X msg 1612 396 read \$1 \$2;
#X obj 1612 369 pack s s;
#X obj 1719 487 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 1679 514 spigot;
#X obj 1679 488 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X text 1746 488 auto?;
#X obj 1828 420 loadbang;
#X msg 1828 444 0;
#X obj 2071 696 spigot;
#X obj 2116 600 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 2069 597 == 0;
#X obj 1866 697 spigot;
#X obj 2113 541 loadbang;
#X msg 2113 565 0;
#X text 2148 599 feedback?;
#X floatatom 2902 407 5 0 0 0 - - - 0;
#X obj 2902 434 oscformat /temperature;
#X obj 2004 764 print writemsg;
#X obj 3334 1541 r \$0-momentary-rec-toggle;
#X obj 2251 1559 notein;
#X text 2452 1631 velocity;
#X text 2443 1609 channel;
#X text 2450 1653 note;
#X floatatom 2418 1653 4 0 127 0 - - - 0;
#X floatatom 2418 1630 4 0 127 0 - - - 0;
#X floatatom 2418 1609 0 1 64 0 - - - 0;
#X text 2321 1565 *;
#X obj 2249 1624 pack 0 0;
#X obj 2248 1657 route 60 61;
#X obj 2248 1691 > 0;
#X obj 2248 1715 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X text 2541 1626 TEST FOOTSWITCHES;
#X obj 2288 1691 > 0;
#X obj 2288 1715 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 2248 1776 s \$0-momentary-rec-toggle;
#X obj 2314 1715 s \$0-gloop;
#X obj 1873 588 r \$0-gloop;
#X text 1068 1613 daniel: should add EQ // effects!!!;
#X text 1075 1578 hugo: MIDI SYNC IS SO NECESSARY;
#X text 1048 1783 hugo: needs conditioning on density \, frequency \,;
#X obj 4099 110 midirealtimein;
#X floatatom 4099 134 5 0 0 0 - - - 0;
#X obj 4099 177 counter 0 0 5;
#X obj 4099 199 select 0;
#X obj 4099 425 bng 15 70 50 0 empty empty pulse\ (16ths) 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 4099 155 select 248 250 252;
#X obj 4134 284 bng 15 70 50 0 empty empty play 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 4169 308 bng 15 70 50 0 empty empty stop 17 7 0 10 #fcfcfc #000000 #000000;
#X floatatom 4293 194 5 0 0 0 BAR - - 0;
#X msg 4134 393 0;
#X text 4405 459 visual and sound indication with this basic 4/4 metronome;
#N canvas 0 25 1680 997 metro 0;
#X obj 101 -14 inlet, f 6;
#X obj 101 104 bng 15 70 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 121 104 bng 15 70 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 141 104 bng 15 70 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 161 104 bng 15 70 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X msg 101 174 1;
#X msg 131 174 2;
#X msg 161 174 3;
#X msg 191 174 4;
#X floatatom 111 125 5 0 0 3 METRONOME - - 0;
#X obj 101 82 loadbang;
#X obj 101 226 osc~;
#X msg 101 196 880;
#X msg 131 196 440;
#X obj 101 304 *~;
#X obj 116 275 line~;
#X obj 101 326 *~;
#X obj 181 104 vsl 15 47 0 127 0 0 empty empty empty 0 -9 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 331 306 / 127;
#X obj 101 348 dac~;
#X msg 116 253 1 \, 0 70;
#X obj 101 38 mod 16;
#X obj 101 60 select 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15;
#X obj 479 160 loadbang;
#X msg 479 182 0;
#X msg 511 183 70;
#X obj 101 12 f;
#X obj 138 12 + 1;
#X connect 0 0 26 0;
#X connect 1 0 5 0;
#X connect 1 0 20 0;
#X connect 2 0 6 0;
#X connect 2 0 20 0;
#X connect 3 0 7 0;
#X connect 3 0 20 0;
#X connect 4 0 8 0;
#X connect 4 0 20 0;
#X connect 5 0 9 0;
#X connect 5 0 12 0;
#X connect 6 0 9 0;
#X connect 6 0 13 0;
#X connect 7 0 9 0;
#X connect 7 0 13 0;
#X connect 8 0 9 0;
#X connect 8 0 13 0;
#X connect 10 0 1 0;
#X connect 11 0 14 0;
#X connect 12 0 11 0;
#X connect 13 0 11 0;
#X connect 14 0 16 0;
#X connect 15 0 14 1;
#X connect 16 0 19 0;
#X connect 16 0 19 1;
#X connect 17 0 18 0;
#X connect 18 0 16 1;
#X connect 20 0 15 0;
#X connect 21 0 22 0;
#X connect 22 0 1 0;
#X connect 22 4 2 0;
#X connect 22 8 3 0;
#X connect 22 12 4 0;
#X connect 23 0 5 0;
#X connect 23 0 24 0;
#X connect 23 0 25 0;
#X connect 24 0 14 1;
#X connect 25 0 17 0;
#X connect 26 0 27 0;
#X connect 26 0 21 0;
#X connect 27 0 26 1;
#X coords 0 -1 1 1 101 61 2 100 100;
#X restore 4281 462 pd metro;
#X text 4219 153 select is used as a filter to isolate the needed MIDI info;
#X obj 3285 1491 change;
#X obj 3285 1515 sel 1;
#X obj 3285 1539 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 3285 1440 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 3285 1467 > 0;
#X obj 3285 1411 r \$0-footswitch-style-rec;
#X obj 4099 470 sel 0;
#X obj 4099 494 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 4099 446 counter 0 3;
#X text 4118 494 pulse (4trs);
#X text 1066 1641 daniel: sounds too dark.;
#N canvas 295 320 450 300 cut-to-512-hop 0;
#X obj 284 113 int;
#X obj 285 80 expr ($f1 / 512);
#X obj 284 142 expr ($i1 * 512);
#X floatatom 284 171 10 44032 440832 0 - - - 0;
#X text 365 169 resulting bufsize;
#X text 413 80 ENSURE BUFSIZE IS A MULTIPLE OF HOP SIZE 512: hop size of the neural audio codec 44100: sample rate;
#X obj 284 194 outlet;
#X obj 284 51 inlet;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 3 0 6 0;
#X connect 7 0 1 0;
#X restore 638 1007 pd cut-to-512-hop;
#X obj 3842 207 tgl 19 0 empty empty sync 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 3694 211 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 3694 147 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X floatatom 3775 148 5 0 0 0 - - - 0;
#N canvas 382 407 450 300 metro-bpm 0;
#X obj 37 37 inlet;
#X obj 97 36 inlet;
#X obj 37 90 metro 100;
#X obj 97 63 expr 1000 * 60 / $f1;
#X obj 37 124 outlet;
#X connect 0 0 2 0;
#X connect 1 0 3 0;
#X connect 2 0 4 0;
#X connect 3 0 2 1;
#X restore 3694 180 pd metro-bpm;
#X text 3692 119 internal clock;
#X text 4101 73 external clock;
#X obj 1610 249 cyclone/onebang;
#X obj 1613 279 symbol;
#X obj 1610 220 t b s;
#X text 1746 251 only allow bang through if we haven't cleared the buffer or otherwise canceled it;
#X msg 1533 217 stop;
#X obj 581 318 vu 10 80 empty in -1 -10 0 12 #404040 #000000 0 0;
#X text 2219 1510 MIDI CONTROL (salad bowl prototype);
#X text 1057 1667 hugo: need to cancel if we reset (done);
#X text 1055 1704 hugo: you should be able to save them (to what? slots? banks? ), f 66;
#X text 1055 1829 hugo: need to implement overdub // delete;
#X text 1057 1874 hugo: needs gui;
#X text 1067 1910 hugo: needs gui;
#X text 527 165 wet buf;
#X text 1222 258 undo circuit: before reading a new file \, save whatever's in the buffer to a backup buffer;
#N canvas 295 320 450 300 (subpatch) 0;
#X array \$0-undobuf 440832 float 2;
#X coords 0 1 440832 -1 100 32 1 0 0;
#X restore 1109 294 graph;
#X obj 1293 391 array get \$0-wetpokebuf;
#X obj 1293 425 array set \$0-undobuf;
#X obj 1294 360 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X text 1324 358 save undo buffer;
#X obj 1109 355 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X text 1131 352 undo;
#X obj 1107 426 array set \$0-wetpokebuf;
#X obj 1108 391 array get \$0-undobuf;
#X obj 1613 302 t s b;
#X obj 1526 163 r \$0-gloop-cancel, f 9;
#X obj 4353 621 s \$0-gloop-cancel;
#X obj 666 1129 array size \$0-undobuf;
#N canvas 933 155 450 300 calc-phasor-freq 0;
#X obj 69 144 samplerate~;
#X obj 68 90 loadbang;
#X obj 68 183 / 88200;
#X obj 85 122 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X floatatom 179 80 10 0 0 0 - - - 0;
#X obj 176 106 t b i i;
#X obj 68 216 t b f;
#X obj 179 39 inlet;
#X obj 69 262 outlet;
#X obj 135 261 outlet;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 2 0 6 0;
#X connect 3 0 0 0;
#X connect 4 0 5 0;
#X connect 5 0 3 0;
#X connect 5 1 2 1;
#X connect 6 0 8 0;
#X connect 6 1 9 0;
#X connect 7 0 4 0;
#X restore 200 1088 pd calc-phasor-freq;
#X text 313 924 if pause \, remember last playback speed for when we resume;
#N canvas 1049 271 450 300 ipokebufname 0;
#X msg 258 81 \$1-ipokebuf;
#X obj 257 110 symbol;
#X obj 258 52 r \$0-id, f 9;
#X obj 257 134 outlet;
#X obj 190 77 inlet;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 2 0 0 0;
#X connect 4 0 1 0;
#X restore 1869 670 pd ipokebufname;
#N canvas 1078 300 450 300 wetpokebufname 0;
#X msg 182 104 \$1-wetpokebuf;
#X obj 151 144 symbol;
#X obj 183 78 r \$0-id, f 9;
#X obj 153 177 outlet;
#X obj 130 92 inlet;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 2 0 0 0;
#X connect 4 0 1 0;
#X restore 2071 668 pd wetpokebufname;
#X text 734 1335 write circuit;
#X obj 4636 686 print the-id-of-this-patch-is;
#X obj 885 1384 s \$0-state-rec;
#X obj 4906 1277 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 4907 1380 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 5063 1378 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X floatatom 5063 1311 5 0 0 0 thresh\ (ms) - - 0;
#X obj 5062 1284 loadbang;
#X text 4850 1382 short;
#N canvas 1136 358 452 389 sw-detect-long-press 0;
#X obj 100 148 timer;
#X obj 100 114 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 101 75 sel 1 0;
#X obj 131 114 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X floatatom 100 178 5 0 0 0 - - - 0;
#X obj 100 205 > 500;
#X obj 100 233 sel 0 1;
#X obj 101 40 inlet;
#X obj 236 38 inlet;
#X text 90 15 toggle in;
#X text 223 9 long press threshold (ms);
#X obj 100 275 outlet;
#X obj 155 276 outlet;
#X text 94 301 short;
#X text 157 298 long;
#X connect 0 0 4 0;
#X connect 1 0 0 0;
#X connect 2 0 1 0;
#X connect 2 1 3 0;
#X connect 3 0 0 1;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 11 0;
#X connect 6 1 12 0;
#X connect 7 0 2 0;
#X connect 8 0 5 1;
#X restore 4905 1346 pd sw-detect-long-press;
#X floatatom 4929 1446 5 0 0 0 - - - 0;
#X obj 4911 1626 int;
#X msg 6393 1770 0;
#X obj 4484 1751 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 5011 1813 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X msg 4511 2011 1;
#X obj 4534 1988 s \$0-pause;
#X obj 4547 1963 s \$0-reset-phasor;
#X obj 4561 1939 s \$0-clearbuffer;
#X obj 4576 1914 s \$0-maxbufsize;
#X obj 4495 2063 s \$0-play;
#X obj 4511 2038 s \$0-rec-toggle;
#X text 5011 1774 cut -> play;
#X text 4266 1881 momentary record circuit - on 0->1 \, reset to max size \, clear buffer \, move playhead to 0 \, record enable and play - on 1->0 \, cut buffer to current len \, record disable, f 27;
#X obj 5270 2072 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 5270 2103 s \$0-sample-pos-bang;
#X obj 5270 2127 r \$0-sample-pos;
#X obj 5267 2153 s \$0-request-bufsize;
#X msg 5014 2158 0;
#X obj 5011 1851 t b b b;
#X obj 4745 2115 s \$0-reset-phasor;
#X obj 5014 2182 s \$0-rec-toggle;
#X obj 5704 1854 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X msg 4514 1750 1;
#X msg 5046 1809 2;
#X text 5683 1818 overdub on;
#X obj 5709 1925 t b;
#X msg 5709 1949 1;
#X obj 5708 1978 s \$0-rec-toggle;
#X text 4551 1750 next state: cut-play;
#X text 5088 1810 next state: overdub on;
#X text 5774 1845 next state: overdub off;
#X msg 5736 1856 3;
#X obj 4909 1656 sel 0 1 2 3;
#X obj 6075 1840 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 6080 1911 t b;
#X obj 6079 1964 s \$0-rec-toggle;
#X msg 6080 1935 0;
#X msg 6107 1842 2;
#X text 6145 1831 next state: overdub on;
#X obj 6365 1772 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 6373 1848 t b b b b b b b;
#X obj 6413 1958 s \$0-pause;
#X obj 6426 1933 s \$0-reset-phasor;
#X obj 6440 1909 s \$0-clearbuffer;
#X obj 6455 1884 s \$0-maxbufsize;
#X text 6359 1735 RESET;
#X obj 1045 578 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X text 6057 1804 overdub off;
#X text 1078 576 ditto style footswitch circuit;
#X obj 4514 1774 s \$0-state-dittosw;
#X obj 4926 1420 r \$0-state-dittosw;
#X obj 5046 1833 s \$0-state-dittosw;
#X obj 5736 1880 s \$0-state-dittosw;
#X obj 6107 1866 s \$0-state-dittosw;
#X msg 4510 1611 ready;
#X obj 4502 1485 sel 0 1 2 3;
#X obj 6393 1794 s \$0-state-dittosw;
#X obj 578 1281 cyclone/edge~;
#X obj 579 1255 >=~ 0.99;
#X obj 578 1308 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 578 1332 s \$0-loop-done;
#X obj 5268 2037 cyclone/onebang;
#X msg 5352 2007 stop;
#X obj 4746 2054 cyclone/onebang;
#X msg 4775 2024 stop;
#X obj 4774 1997 r \$0-loop-done;
#X obj 4480 1802 t b b b b b b b b;
#X obj 4740 1834 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 4746 2078 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X text 5226 1939 dont cut buffer if we've already done a full loop, f 34;
#X obj 5351 1979 r \$0-loop-done;
#X obj 5031 2075 r \$0-loop-done;
#X obj 5030 2108 cyclone/onebang;
#X msg 5078 2048 stop;
#X text 5015 1949 if loop done and we havent changed state \, still turn off recording. if we change state \, don't allow any bangs through, f 25;
#X msg 4422 1519 set ready;
#X msg 4504 1520 set playing;
#X msg 4602 1520 set overdub;
#X msg 4696 1522 set playing;
#X obj 971 536 r \$0-state-ext-ditto;
#X msg 974 570 ready;
#X obj 4614 1614 s \$0-state-ext-ditto;
#X text 4522 1438 STATE FRONTEND;
#X text 4497 1299 state: 0: ready (then \, we record) 1: playing (then \, we overdub) 2: overdubbing (then \, we disable overdub) 3: overdub off;
#X text 5116 1370 long press: RESET;
#X text 4764 1808 this bang allows for stage 2 to happen, f 19;
#X text 4772 1957 dont force reset phasor if we've already looped;
#X obj 1044 618 s \$0-ditto-style-rec-sw;
#X obj 4906 1248 r \$0-ditto-style-rec-sw;
#X text 4346 1758 STAGE 1 init -> record;
#X text 5012 1756 STAGE 2;
#X text 5681 1796 STAGE 3;
#X text 6062 1784 STAGE 4;
#X text 1045 1738 hugo: need to implement overdub // delete on a footswitch (done \, ditto style footswtich);
#X obj 2779 935 list prepend send;
#X obj 2779 959 list trim;
#X text 2915 931 get a list of available params;
#X obj 2619 433 oscformat /codes_upper_codebook_mask;
#X msg 2472 406 -1;
#X obj 2780 889 oscformat /get_params;
#X obj 2198 316 oscformat /codes_periodic_prompt;
#X floatatom 2194 405 5 0 0 0 - - - 0;
#X obj 2194 432 oscformat /controls_periodic_prompt;
#X obj 2778 850 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X floatatom 3093 407 5 0 0 0 - - - 0;
#X obj 3093 434 oscformat /mask_temperature;
#X floatatom 2560 310 5 0 0 0 - - - 0;
#X obj 2560 337 oscformat /typical_mass;
#X floatatom 2620 402 5 0 0 0 - - - 0;
#X obj 2196 257 r parambang;
#X obj 2193 374 r parambang;
#X obj 2468 376 r parambang;
#X obj 2562 284 r parambang;
#X obj 2616 377 r parambang;
#X obj 2903 378 r parambang;
#X obj 3090 374 r parambang;
#X obj 2682 125 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 2681 161 s parambang;
#X obj 2717 122 loadbang;
#X connect 2 0 3 0;
#X connect 2 0 13 1;
#X connect 4 0 0 0;
#X connect 5 0 7 0;
#X connect 5 0 131 0;
#X connect 6 0 22 0;
#X connect 7 0 107 0;
#X connect 9 0 137 0;
#X connect 9 0 138 0;
#X connect 11 0 22 1;
#X connect 14 0 87 1;
#X connect 16 0 21 1;
#X connect 21 0 13 0;
#X connect 22 0 28 1;
#X connect 24 0 25 0;
#X connect 24 0 26 0;
#X connect 25 0 44 0;
#X connect 27 0 28 0;
#X connect 28 0 33 0;
#X connect 29 0 30 0;
#X connect 29 0 259 0;
#X connect 30 0 36 1;
#X connect 30 0 38 0;
#X connect 30 1 31 0;
#X connect 31 0 41 0;
#X connect 31 1 42 0;
#X connect 32 0 33 1;
#X connect 33 0 134 0;
#X connect 34 0 21 0;
#X connect 36 0 37 0;
#X connect 37 0 134 1;
#X connect 38 0 40 1;
#X connect 39 0 40 0;
#X connect 40 0 37 1;
#X connect 41 0 32 0;
#X connect 42 0 32 0;
#X connect 44 0 43 0;
#X connect 45 1 47 0;
#X connect 47 0 58 0;
#X connect 48 0 56 0;
#X connect 49 0 68 0;
#X connect 49 0 65 0;
#X connect 49 2 53 0;
#X connect 50 0 226 1;
#X connect 50 0 255 0;
#X connect 50 0 256 0;
#X connect 51 1 69 0;
#X connect 51 1 158 0;
#X connect 52 0 56 0;
#X connect 55 0 62 0;
#X connect 56 0 62 0;
#X connect 57 0 59 0;
#X connect 58 0 57 0;
#X connect 59 0 60 0;
#X connect 60 0 61 0;
#X connect 61 0 62 0;
#X connect 62 0 54 0;
#X connect 63 0 67 0;
#X connect 64 0 63 0;
#X connect 67 0 49 0;
#X connect 68 0 228 0;
#X connect 70 0 71 0;
#X connect 71 0 62 0;
#X connect 72 0 70 0;
#X connect 75 0 103 0;
#X connect 82 0 368 0;
#X connect 83 0 13 0;
#X connect 84 0 83 2;
#X connect 85 0 86 0;
#X connect 85 0 326 0;
#X connect 86 0 87 0;
#X connect 86 0 36 0;
#X connect 86 0 111 0;
#X connect 86 0 135 0;
#X connect 86 0 136 0;
#X connect 88 0 99 0;
#X connect 88 0 143 0;
#X connect 88 0 144 0;
#X connect 88 0 252 0;
#X connect 88 0 253 0;
#X connect 88 0 86 1;
#X connect 89 0 90 0;
#X connect 90 0 109 0;
#X connect 90 1 132 0;
#X connect 91 0 85 1;
#X connect 97 0 98 0;
#X connect 97 0 85 0;
#X connect 99 0 96 0;
#X connect 100 0 218 0;
#X connect 102 0 103 0;
#X connect 103 0 130 0;
#X connect 104 0 5 0;
#X connect 105 0 5 0;
#X connect 106 0 105 0;
#X connect 107 0 105 0;
#X connect 108 0 131 0;
#X connect 108 1 7 0;
#X connect 109 0 123 0;
#X connect 109 1 110 0;
#X connect 109 2 118 0;
#X connect 109 3 119 0;
#X connect 109 4 120 0;
#X connect 109 5 121 0;
#X connect 110 0 139 0;
#X connect 111 0 113 0;
#X connect 112 0 111 0;
#X connect 114 0 29 0;
#X connect 115 0 91 0;
#X connect 116 0 108 0;
#X connect 117 0 106 0;
#X connect 122 0 95 0;
#X connect 122 0 103 0;
#X connect 124 0 125 0;
#X connect 126 0 127 0;
#X connect 128 0 100 0;
#X connect 129 0 140 0;
#X connect 130 0 100 0;
#X connect 131 0 97 0;
#X connect 132 0 133 0;
#X connect 132 1 129 0;
#X connect 132 2 124 0;
#X connect 135 0 6 0;
#X connect 135 0 83 0;
#X connect 136 0 83 1;
#X connect 141 0 9 0;
#X connect 141 0 251 0;
#X connect 142 0 134 0;
#X connect 145 0 146 0;
#X connect 146 0 149 0;
#X connect 147 0 258 0;
#X connect 148 0 146 0;
#X connect 150 0 45 0;
#X connect 150 0 171 0;
#X connect 151 0 153 0;
#X connect 152 0 155 1;
#X connect 153 0 152 0;
#X connect 154 0 51 0;
#X connect 154 0 66 0;
#X connect 155 0 154 0;
#X connect 156 0 157 1;
#X connect 157 0 50 0;
#X connect 158 0 157 0;
#X connect 160 0 161 0;
#X connect 161 0 156 0;
#X connect 162 0 150 0;
#X connect 163 0 162 1;
#X connect 163 0 164 0;
#X connect 164 0 165 1;
#X connect 165 0 150 0;
#X connect 166 0 167 0;
#X connect 167 0 163 0;
#X connect 169 0 170 0;
#X connect 170 0 70 0;
#X connect 172 0 89 0;
#X connect 173 0 177 0;
#X connect 173 0 181 0;
#X connect 173 1 178 0;
#X connect 173 1 181 1;
#X connect 173 2 179 0;
#X connect 181 0 182 0;
#X connect 182 0 183 0;
#X connect 182 1 186 0;
#X connect 183 0 184 0;
#X connect 184 0 188 0;
#X connect 186 0 187 0;
#X connect 186 0 189 0;
#X connect 190 0 50 0;
#X connect 194 0 195 0;
#X connect 195 0 199 0;
#X connect 196 0 197 0;
#X connect 196 3 202 0;
#X connect 197 0 198 0;
#X connect 198 0 205 0;
#X connect 198 0 215 0;
#X connect 199 0 196 0;
#X connect 199 1 200 0;
#X connect 199 2 201 0;
#X connect 200 0 203 0;
#X connect 201 0 203 0;
#X connect 203 0 205 0;
#X connect 207 0 208 0;
#X connect 208 0 209 0;
#X connect 209 0 89 0;
#X connect 210 0 211 0;
#X connect 211 0 207 0;
#X connect 212 0 210 0;
#X connect 213 0 214 0;
#X connect 215 0 213 0;
#X connect 218 0 88 0;
#X connect 221 0 223 0;
#X connect 222 0 223 1;
#X connect 223 0 220 0;
#X connect 226 0 227 0;
#X connect 227 0 249 0;
#X connect 228 0 226 0;
#X connect 228 1 227 1;
#X connect 230 0 226 0;
#X connect 241 0 242 0;
#X connect 243 0 241 0;
#X connect 245 0 248 0;
#X connect 248 0 247 0;
#X connect 249 0 155 0;
#X connect 249 1 243 0;
#X connect 250 0 230 0;
#X connect 253 0 97 0;
#X connect 253 1 97 1;
#X connect 255 0 165 0;
#X connect 256 0 162 0;
#X connect 260 0 266 0;
#X connect 261 0 268 0;
#X connect 262 0 307 0;
#X connect 263 0 266 1;
#X connect 264 0 263 0;
#X connect 266 0 261 0;
#X connect 266 1 262 0;
#X connect 267 0 268 1;
#X connect 267 0 323 0;
#X connect 268 0 300 0;
#X connect 269 0 324 0;
#X connect 270 0 290 0;
#X connect 270 0 334 0;
#X connect 271 0 286 0;
#X connect 271 0 291 0;
#X connect 272 0 278 0;
#X connect 281 0 282 0;
#X connect 283 0 284 0;
#X connect 285 0 288 0;
#X connect 286 0 331 0;
#X connect 286 1 285 0;
#X connect 286 1 341 0;
#X connect 286 2 329 0;
#X connect 289 0 293 0;
#X connect 289 0 299 0;
#X connect 290 0 317 0;
#X connect 291 0 319 0;
#X connect 293 0 294 0;
#X connect 294 0 295 0;
#X connect 299 0 320 0;
#X connect 300 0 270 0;
#X connect 300 1 271 0;
#X connect 300 2 289 0;
#X connect 300 3 301 0;
#X connect 301 0 302 0;
#X connect 301 0 305 0;
#X connect 302 0 304 0;
#X connect 304 0 303 0;
#X connect 305 0 321 0;
#X connect 307 0 269 0;
#X connect 307 0 308 0;
#X connect 308 2 309 0;
#X connect 308 3 310 0;
#X connect 308 4 311 0;
#X connect 308 5 312 0;
#X connect 314 0 355 0;
#X connect 318 0 267 0;
#X connect 323 0 343 0;
#X connect 323 1 344 0;
#X connect 323 2 345 0;
#X connect 323 3 346 0;
#X connect 325 0 327 0;
#X connect 326 0 325 0;
#X connect 327 0 328 0;
#X connect 329 0 281 0;
#X connect 330 0 329 0;
#X connect 331 0 336 0;
#X connect 332 0 331 0;
#X connect 333 0 332 0;
#X connect 334 0 335 0;
#X connect 334 1 277 0;
#X connect 334 2 272 0;
#X connect 334 3 273 0;
#X connect 334 4 274 0;
#X connect 334 5 275 0;
#X connect 334 6 276 0;
#X connect 335 0 331 1;
#X connect 335 0 329 1;
#X connect 335 0 340 1;
#X connect 336 0 287 0;
#X connect 338 0 330 0;
#X connect 339 0 340 0;
#X connect 340 0 285 0;
#X connect 341 0 340 0;
#X connect 343 0 322 0;
#X connect 343 0 349 0;
#X connect 344 0 322 0;
#X connect 344 0 349 0;
#X connect 345 0 322 0;
#X connect 345 0 349 0;
#X connect 346 0 322 0;
#X connect 346 0 349 0;
#X connect 347 0 348 0;
#X connect 356 0 260 0;
#X connect 362 0 363 0;
#X connect 363 0 62 0;
#X connect 365 0 70 0;
#X connect 366 0 72 0;
#X connect 367 0 362 0;
#X connect 368 0 70 0;
#X connect 369 0 370 0;
#X connect 370 0 70 0;
#X connect 371 0 367 0;
#X connect 372 0 373 0;
#X connect 373 0 70 0;
#X connect 374 0 375 0;
#X connect 375 0 70 0;
#X connect 376 0 365 0;
#X connect 377 0 82 0;
#X connect 378 0 369 0;
#X connect 379 0 366 0;
#X connect 380 0 374 0;
#X connect 381 0 376 0;
#X connect 382 0 169 0;
#X connect 383 0 372 0;
#X connect 384 0 385 0;
#X connect 386 0 385 0;
#X coords 0 -1 1 1 200 128 1 100 100;
